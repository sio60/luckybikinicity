// src/data/templates.js
function fill(t, vars) {
  return t.replace(/\{(\w+)\}/g, (_, k) => (vars?.[k] ?? ""));
}

function makePool(parts) {
  const { intro, focus, tip, caution, closing } = parts;
  const out = [];
  for (let i=0;i<intro.length;i++){
    for (let j=0;j<focus.length;j++){
      for (let k=0;k<tip.length;k++){
        const c = caution[(i+j+k)%caution.length];
        const z = closing[(i*7+j*3+k)%closing.length];
        out.push(`${intro[i]} ${focus[j]} ${tip[k]} ${c} ${z}`);
      }
    }
  }
  return out.slice(0, 120);
}

export const TODAY_POOL = makePool({
  intro: [
    "{name}님, {today}({weekday})은 전체적으로 안정적인 흐름입니다.",
    "{name}님에게 오늘은 작은 선택이 큰 결과로 이어질 수 있는 날이에요.",
    "{today}의 기운은 {name}님에게 '정리'와 '시작'을 동시에 권해요.",
    "컨디션이 좋아지는 {today}, {name}님의 발걸음이 가벼워집니다.",
    "{weekday}인 오늘, {name}님의 집중력이 평소보다 또렷해요."
  ],
  focus: [
    "오전에 루틴을 가볍게 정리하면 오후에 속도가 붙습니다.",
    "사람보다 '일'에 초점을 두면 성과가 또렷해져요.",
    "주변 요청을 다 받지 말고, 하나만 제대로 마무리해보세요.",
    "작은 청소/정리로 머리를 맑게 하면 좋은 아이디어가 떠오릅니다.",
    "걷기 15분만 해도 에너지 회복이 빨라요."
  ],
  tip: [
    "메모 앱에 세 줄만 적고 시작해보세요.",
    "연락은 필요한 말만 짧게—오해를 줄입니다.",
    "물 한 컵과 스트레칭으로 리셋하세요.",
    "평소보다 10분 일찍 자면 내일이 더 산뜻해요.",
    "지갑 관리는 보수적으로, 지출은 한 번 더 생각!"
  ],
  caution: [
    "급한 소비/충동구매는 피하는 게 좋아요.",
    "감정적인 말은 내일로 미루세요.",
    "타인의 속도에 휘둘리지 않게 주의!",
    "서두르다 놓치는 실수를 경계하세요."
  ],
  closing: [
    "작게 이겨서 크게 웃는 하루가 됩니다.",
    "한 걸음만 확실히—그게 오늘의 럭키 포인트.",
    "행운 키워드: 정리, 반복, 루틴.",
    "라ッ키 아이템: 따뜻한 음료 한 잔 ☕",
    "저녁에 하늘 한 번 올려다보기—마음이 가벼워져요."
  ]
});

export const NAME_POOL = makePool({
  intro: [
    "이름 {name}에는 부드러움 속 추진력이 숨어 있어요.",
    "{name}이라는 소리는 사람을 편하게 하는 파동을 가집니다.",
    "닉네임 {name}은 상황을 중재하고 균형을 잡는 기운.",
    "{name}님은 조용히 오래 가는 집중력이 장점이에요.",
    "이름 {name}엔 '낯가림은 있어도 신뢰는 깊다'는 인상이 담겨요."
  ],
  focus: [
    "막판 집중력이 좋아 마무리형 프로젝트에 강합니다.",
    "사람 사이의 미세한 뉘앙스를 잘 잡아냅니다.",
    "매일 조금씩 쌓는 습관에서 진가가 나옵니다.",
    "새로운 도전은 '작게 테스트'로 시작하면 좋아요.",
    "관계에선 솔직하고 단정한 말이 가장 잘 통합니다."
  ],
  tip: [
    "이름을 또박또박 소개해 보세요—첫인상이 선명해집니다.",
    "프로필 문구에 한 줄 목표를 넣어두면 기회가 와요.",
    "폰의 홈화면을 심플하게—집중이 쉬워집니다.",
    "잘하는 걸 '리스트'로 만들면 자신감이 유지돼요.",
    "하루 20분 몰입 타이머가 행운을 부릅니다."
  ],
  caution: [
    "지나친 배려로 본인을 뒤로 미루지 마세요.",
    "한 번에 많은 걸 바꾸려다 지치지 않게 주의!",
    "완벽주의는 80%에서 멈추는 연습으로 조절하세요."
  ],
  closing: [
    "키워드: 균형/꾸준함/정리.",
    "작지만 단단한 발자국이 길이 됩니다.",
    "당신의 차분함이 주변의 기준이 됩니다.",
    "행운 포인트는 ‘담백함’. 이게 {name}의 매력!"
  ]
});

export const SAJU_POOL = makePool({
  intro: [
    "{birthdate}({calendar}) 기준, {animal}띠의 기운이 깔려 있어요.",
    "{name}님 사주는 '흐트러짐을 정리하면 길이 열린다'가 핵심.",
    "{animal}띠의 색채가 강해 시작-중단-재시작에 강합니다.",
    "사주 흐름상 올해는 '축적'과 '연결'이 핵심 키워드.",
    "태생적으로 '정보 정리'와 '길 찾기'에 소질이 있어요."
  ],
  focus: [
    "시간표를 만드는 순간 운의 흐름이 정돈됩니다.",
    "관계에선 느슨한 연결을 여러 개 만들어두면 도움이 커요.",
    "한 분야를 파고드는 몰입이 인정과 기회를 부릅니다.",
    "체력 루틴(수면/식사/가벼운 운동)이 곧 재산입니다.",
    "배운 걸 기록/공유하면 귀인이 붙습니다."
  ],
  tip: [
    "월간 목표를 3개로 줄여보세요.",
    "루틴을 '보기'로 만드는 보드(캘린더/화이트보드)가 좋아요.",
    "주 2회는 완전한 휴식—오히려 운의 흐름이 좋아집니다.",
    "새 사람보다 '있던 사람'에게 기회가 옵니다.",
    "계약/서류는 이틀 뒤 한 번 더 검토!"
  ],
  caution: [
    "감정적 결정을 경계—하루만 더 생각하세요.",
    "밤샘은 운을 깎습니다. 수면이 곧 복.",
    "큰 지출·장기 약정은 서두르지 말 것."
  ],
  closing: [
    "핵심: 정리하면 열린다.",
    "행운 색: 딥블루/그린.",
    "작고 단단한 습관이 명운을 바꿔요.",
    "당신의 ‘꾸준함’이 최고의 부적."
  ]
});

export const COMPAT_POOL = makePool({
  intro: [
    "{aName} × {bName}, 서로의 결을 맞추면 상승 곡선이 나옵니다.",
    "{aName}님과 {bName}님은 템포가 다르지만 목표는 비슷해요.",
    "두 분의 첫인상은 어색할 수 있으나, 깊이는 천천히 자랍니다.",
    "{aName}/{bName} 조합은 ‘역할 분담’에서 매력이 커집니다.",
    "관계의 핵심은 '기대치 조율'—말로 명확히 하기!"
  ],
  focus: [
    "하나를 {aName}, 다른 하나를 {bName}이 맡으면 효율↑",
    "상대의 장점을 기록으로 남겨 서로에게 공유해보세요.",
    "주기적으로 가벼운 산책/카페 토크가 마음을 가깝게 합니다.",
    "금전/시간 약속은 반드시 캘린더로! 갈등 예방에 탁월.",
    "서로의 페이스를 인정하면 안정감이 생겨요."
  ],
  tip: [
    "호칭/메시지 톤을 가볍게—오해가 줄어듭니다.",
    "주 1회 ‘칭찬 3가지’ 루틴이 시너지를 높입니다.",
    "사진/기록을 쌓아두면 관계의 자산이 됩니다.",
    "오늘 하루 ‘고맙다’ 한 번만 먼저 말하기.",
    "함께 배우는 취미가 궁합을 끌어올립니다."
  ],
  caution: [
    "침묵이 길어지면 추측이 커집니다—짧게라도 공유!",
    "비교/일방적 판단 금지. 느린 쪽에 맞추면 좋아요.",
    "경제 관리는 역할 분담이 해답."
  ],
  closing: [
    "호감지수: {compatScore}/100 (대화·기록 루틴 도입 시 +10)",
    "장기 궁합은 '신뢰'에서 꽃핍니다.",
    "관계 키워드: 역할, 기록, 칭찬.",
    "두 분의 보폭이 맞춰질수록 관계는 더 편안해져요."
  ]
});

// 범용 치환기
export const fillTemplate = fill;
