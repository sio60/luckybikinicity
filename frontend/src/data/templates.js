// src/data/templates.js
function fill(t, vars) {
  return t.replace(/\{(\w+)\}/g, (_, k) => (vars?.[k] ?? ""));
}

function makePool(parts) {
  const { intro, focus, tip, caution, closing } = parts;
  const out = [];
  for (let i=0;i<intro.length;i++){
    for (let j=0;j<focus.length;j++){
      for (let k=0;k<tip.length;k++){
        const c = caution[(i+j+k)%caution.length];
        const z = closing[(i*7+j*3+k)%closing.length];
        out.push(`${intro[i]} ${focus[j]} ${tip[k]} ${c} ${z}`);
      }
    }
  }
  return out.slice(0, 120);
}

// ===== 기존 풀 =====
export const TODAY_POOL = makePool({
  intro: [
    "{name}님, {today}({weekday})은 전체적으로 안정적인 흐름입니다.",
    "{name}님에게 오늘은 작은 선택이 큰 결과로 이어질 수 있는 날이에요.",
    "{today}의 기운은 {name}님에게 정리와 시작을 동시에 권해요.",
    "컨디션이 좋아지는 {today}, {name}님의 발걸음이 가벼워집니다.",
    "{weekday}인 오늘, {name}님의 집중력이 평소보다 또렷해요."
  ],
  focus: [
    "오전에 루틴을 가볍게 정리하면 오후에 속도가 붙습니다.",
    "사람보다 일에 초점을 두면 성과가 또렷해져요.",
    "주변 요청을 다 받지 말고 하나만 제대로 마무리해보세요.",
    "작은 청소와 정리로 머리를 맑게 하면 좋은 아이디어가 떠오릅니다.",
    "걷기 15분만 해도 에너지 회복이 빨라요."
  ],
  tip: [
    "메모 앱에 세 줄만 적고 시작해보세요.",
    "연락은 필요한 말만 짧게 하면 오해를 줄입니다.",
    "물 한 컵과 스트레칭으로 리셋하세요.",
    "평소보다 10분 일찍 자면 내일이 더 산뜻해요.",
    "지갑 관리는 보수적으로. 지출은 한 번 더 생각!"
  ],
  caution: [
    "급한 소비와 충동구매는 피하는 게 좋아요.",
    "감정적인 말은 내일로 미루세요.",
    "타인의 속도에 휘둘리지 않게 주의하세요.",
    "서두르다 놓치는 실수를 경계하세요."
  ],
  closing: [
    "작게 이겨서 크게 웃는 하루가 됩니다.",
    "한 걸음만 확실히. 그게 오늘의 럭키 포인트.",
    "행운 키워드: 정리, 반복, 루틴.",
    "라키 아이템: 따뜻한 음료 한 잔 ☕",
    "저녁에 하늘 한 번 올려다보면 마음이 가벼워져요."
  ]
});

export const NAME_POOL = makePool({
  intro: [
    "이름 {name}에는 부드러움 속 추진력이 숨어 있어요.",
    "{name}이라는 소리는 사람을 편하게 하는 파동을 가집니다.",
    "상황을 중재하고 균형을 잡는 기운이에요.",
    "{name}님은 조용히 오래 가는 집중력이 장점입니다.",
    "이름 {name}엔 낯가림은 있어도 신뢰는 깊다는 인상이 담겨요."
  ],
  focus: [
    "막판 집중력이 좋아 마무리형 프로젝트에 강합니다.",
    "사람 사이의 미세한 뉘앙스를 잘 잡아냅니다.",
    "매일 조금씩 쌓는 습관에서 진가가 나옵니다.",
    "새로운 도전은 작게 테스트로 시작하면 좋아요.",
    "관계에선 솔직하고 단정한 말이 가장 잘 통합니다."
  ],
  tip: [
    "이름을 또박또박 소개해 보세요. 첫인상이 선명해집니다.",
    "프로필 문구에 한 줄 목표를 넣어두면 기회가 와요.",
    "폰의 홈화면을 심플하게 하면 집중이 쉬워집니다.",
    "잘하는 걸 리스트로 만들면 자신감이 유지돼요.",
    "하루 20분 몰입 타이머가 행운을 부릅니다."
  ],
  caution: [
    "지나친 배려로 본인을 뒤로 미루지 마세요.",
    "한 번에 많은 걸 바꾸려다 지치지 않게 주의하세요.",
    "완벽주의는 80%에서 멈추는 연습으로 조절하세요."
  ],
  closing: [
    "키워드: 균형, 꾸준함, 정리.",
    "작지만 단단한 발자국이 길이 됩니다.",
    "당신의 차분함이 주변의 기준이 됩니다.",
    "행운 포인트는 담백함. 이게 {name}의 매력!"
  ]
});

export const SAJU_POOL = makePool({
  intro: [
    "{birthdate}({calendar}) 기준, {animal}띠의 기운이 깔려 있어요.",
    "{name}님 사주는 흐트러짐을 정리하면 길이 열린다가 핵심입니다.",
    "{animal}띠의 색채가 강해 시작과 재시작에 강합니다.",
    "사주 흐름상 올해는 축적과 연결이 핵심 키워드예요.",
    "태생적으로 정보 정리와 길 찾기에 소질이 있어요."
  ],
  focus: [
    "시간표를 만드는 순간 운의 흐름이 정돈됩니다.",
    "관계는 느슨한 연결을 여러 개 만들어두면 도움이 커요.",
    "한 분야를 파고드는 몰입이 인정과 기회를 부릅니다.",
    "체력 루틴(수면, 식사, 가벼운 운동)이 곧 재산입니다.",
    "배운 걸 기록하고 공유하면 귀인이 붙습니다."
  ],
  tip: [
    "월간 목표를 3개로 줄여보세요.",
    "보이는 보드(캘린더, 화이트보드)를 쓰면 좋아요.",
    "주 2회는 완전한 휴식이 필요합니다.",
    "새 사람보다 있던 사람에게 기회가 옵니다.",
    "계약과 서류는 이틀 뒤 한 번 더 검토하세요."
  ],
  caution: [
    "감정적 결정은 하루만 더 생각하세요.",
    "밤샘은 운을 깎습니다. 수면이 곧 복입니다.",
    "큰 지출이나 장기 약정은 서두르지 마세요."
  ],
  closing: [
    "핵심: 정리하면 열린다.",
    "행운 색: 딥블루, 그린.",
    "작고 단단한 습관이 명운을 바꿔요.",
    "당신의 꾸준함이 최고의 부적입니다."
  ]
});

export const COMPAT_POOL = makePool({
  intro: [
    "{aName} × {bName}, 서로의 결을 맞추면 상승 곡선이 나옵니다.",
    "{aName}님과 {bName}님은 템포가 다르지만 목표는 비슷해요.",
    "두 분의 첫인상은 어색할 수 있으나 깊이는 천천히 자랍니다.",
    "{aName}/{bName} 조합은 역할 분담에서 매력이 커집니다.",
    "관계의 핵심은 기대치 조율. 말로 명확히 하기!"
  ],
  focus: [
    "하나는 {aName}, 다른 하나는 {bName}이 맡으면 효율이 올라요.",
    "상대의 장점을 기록으로 남겨 서로 공유해보세요.",
    "가벼운 산책이나 카페 토크가 마음을 가깝게 합니다.",
    "금전과 시간 약속은 캘린더로 관리하면 갈등이 줄어요.",
    "서로의 페이스를 인정하면 안정감이 생깁니다."
  ],
  tip: [
    "호칭과 메시지 톤을 가볍게. 오해가 줄어듭니다.",
    "주 1회 칭찬 3가지 루틴이 시너지를 높입니다.",
    "사진과 기록을 쌓아두면 관계의 자산이 됩니다.",
    "오늘 하루 고맙다 한 번만 먼저 말해보기.",
    "함께 배우는 취미가 궁합을 끌어올립니다."
  ],
  caution: [
    "침묵이 길어지면 추측이 커집니다. 짧게라도 공유하세요.",
    "비교와 일방적 판단은 금지. 느린 쪽에 맞추면 좋아요.",
    "경제 관리는 역할 분담이 해답입니다."
  ],
  closing: [
    "호감지수: {compatScore}/100 (대화와 기록 루틴 도입 시 +10)",
    "장기 궁합은 신뢰에서 꽃핍니다.",
    "관계 키워드: 역할, 기록, 칭찬.",
    "보폭이 맞춰질수록 관계는 편안해집니다."
  ]
});

// ===== 팔로우업 카테고리용 풀 4개 =====
export const LOVE_POOL = makePool({
  intro: [
    "{name}님, 오늘의 연애운은 작은 배려에서 시작됩니다.",
    "{weekday}의 사랑운은 말의 온도와 타이밍에 달려 있어요.",
    "{name}님의 진심이 전해지기 좋은 흐름입니다.",
    "연락 운이 좋은 날이에요. 먼저 톡을 열어도 좋아요.",
    "{name}님의 매력이 편안함에서 나옵니다."
  ],
  focus: [
    "상대의 리듬을 존중하면 호감도가 올라갑니다.",
    "대화는 질문 6:발언 4의 비율이 좋아요.",
    "서두르지 말고 가벼운 제안으로 다가가세요.",
    "만남보단 대화의 질이 중요해요.",
    "기대치를 솔직히 나누면 오해가 줄어듭니다."
  ],
  tip: [
    "안부와 함께 짧은 칭찬 한 줄을 곁들여 보세요.",
    "답장을 재촉하지 말고 하루의 여유를 주세요.",
    "사진·음악 같은 가벼운 공유가 분위기를 만듭니다.",
    "오늘의 대화는 마침표보다 느낌표.",
    "감정 표현은 담백하게."
  ],
  caution: [
    "확답을 강요하면 역효과예요.",
    "과한 밀당은 피하세요.",
    "비교 발언은 금물."
  ],
  closing: [
    "행운 키워드: 배려, 여유, 공감.",
    "작은 웃음이 관계의 문을 엽니다.",
    "메시지를 짧게, 마음은 따뜻하게."
  ]
});

export const MONEY_POOL = makePool({
  intro: [
    "{name}님의 금전운은 지출 관리에서 플러스가 시작됩니다.",
    "{weekday}의 재운은 묵직하진 않지만 안정적이에요.",
    "작은 절약이 누적되는 흐름입니다.",
    "계획적인 지출이 기회를 부릅니다.",
    "현명한 비교가 수익을 지킵니다."
  ],
  focus: [
    "고정비 한 항목만 줄여도 체감이 큽니다.",
    "지출은 메모로 실시간 기록하세요.",
    "충동구매 방지용 24시간 룰을 써보세요.",
    "필요와 욕구를 분리해서 생각하세요.",
    "작은 수입 다각화 아이디어를 모아두세요."
  ],
  tip: [
    "구독 점검을 주 1회.",
    "장바구니에 두고 하루 뒤 결제.",
    "비교표로 최저가 확인.",
    "현금성 쿠폰보다 캐시백을 선호.",
    "예산은 80%만 배정."
  ],
  caution: [
    "무이자 장기 할부는 총액을 꼭 확인.",
    "친한 사이일수록 차용증 필수.",
    "큰 계약은 이틀 뒤 재검토."
  ],
  closing: [
    "행운 키워드: 기록, 비교, 절제.",
    "작은 플러스가 큰 안정이 됩니다.",
    "지갑이 편안하면 마음도 편해요."
  ]
});

export const HEALTH_POOL = makePool({
  intro: [
    "{name}님의 건강운은 수면 리듬이 핵심이에요.",
    "{weekday}은 몸을 풀면 마음도 풀리는 날.",
    "컨디션이 서서히 회복되는 흐름입니다.",
    "작은 습관이 체력을 지킵니다.",
    "긴장 완화가 집중력을 올립니다."
  ],
  focus: [
    "어깨·목 스트레칭 3분이 즉효.",
    "물을 자주 마시면 피로가 줄어요.",
    "야식 대신 따뜻한 음료를.",
    "햇빛 10분이 리듬을 잡아줘요.",
    "규칙적 취침이 최고의 보약."
  ],
  tip: [
    "걷기 15분으로 순환 올리기.",
    "눈운동 20-20-20.",
    "단 음식은 낮 시간대에.",
    "일어서서 전화하기.",
    "취침 30분 전 화면 끄기."
  ],
  caution: [
    "과로의 조짐에 즉시 휴식.",
    "무리한 운동은 부상 위험.",
    "카페인 늦은 시간 금지."
  ],
  closing: [
    "행운 키워드: 수면, 물, 스트레칭.",
    "오늘의 몸이 내일의 집중력을 만듭니다.",
    "건강 루틴이 곧 자신감."
  ]
});

export const WORK_POOL = makePool({
  intro: [
    "{name}님의 일·학업 운은 ‘첫 줄 쓰기’에서 시작됩니다.",
    "{weekday}은 루틴을 정리하면 속도가 붙어요.",
    "작은 완수가 자신감을 만듭니다.",
    "집중 창이 또렷해지는 날입니다.",
    "우선순위 정리가 성과를 부릅니다."
  ],
  focus: [
    "범위를 반으로 줄이고 지금 끝내보세요.",
    "피드백은 빠르고 짧게.",
    "방해 요소를 20분만 차단.",
    "마감은 ‘초안→보완’ 2단계로.",
    "어려운 일은 아침에."
  ],
  tip: [
    "할 일 3개만 적고 시작.",
    "타이머 25분 몰입 후 5분 휴식.",
    "자료는 폴더 구조로 정리.",
    "회의는 안건·결정만 기록.",
    "완벽 80%에서 출발."
  ],
  caution: [
    "멀티태스킹은 속도 저하.",
    "늦은 밤 작업은 품질 저하.",
    "과한 준비는 실행 지연."
  ],
  closing: [
    "행운 키워드: 우선순위, 초안, 반복.",
    "작은 출발이 큰 결과를 만듭니다.",
    "오늘의 한 걸음이 실력을 키워요."
  ]
});

export const fillTemplate = fill;
